Compiling the MIDAS DTC tools from Bruno
========================================

Bruno has not put the detector tools into a repository yet, although that will happen soon.  He
has made them available to me and I copied the programs to the directory
`~cdmssoft/repositories/MidasDTC`.  The place he put the most updated version of this code was on
nerva at `/nervascratch/serfass/MidasDTC.tar.gz`, this was updated on **18 June 2015**.

Compiling this was a little tricky because the make system didn't work perfectly.   It eventually
got working when I made a few modifications, as listed below. 

  1. Be sure to set the `DTCDIR` environmental variable like `$export
      DTCDIR=/abs/path/to/MidasDTC/`

  2. Change the code for the file `MidasDTC/common/midasControl/VirtualOdbRW.h` because it didn't
      have the member function `odbWriteUint32`  basically you have to add the following to
      `VirtualOdbRW.h`

      ```
      virtual int odbWriteUint32(const char*name, int index, uint32_t value) = 0;
      ```

      ```
      uint32_t TMidasControl::odbReadUint32(const char*name,int index,uint32_t defaultValue)
      {
        uint32_t value = defaultValue;
        if (odbReadAny(name,index,TID_DWORD,&value) == 0)
          return value;
        else
          return defaultValue;
      };
      ```

      and add the appropriate thing to the corresponding `.h` file. 


  3. Change the Makefile in `MidasDTC/common/midasODB/Makefile` to have the lines:

     ```
     ifdef MIDASSYS
     CXXFLAGS += -DHAVE_MIDAS -I$(MIDASSYS)/include -I$(DTCDIR)/common/midasControl
     endif
     ```

     Instead of:

     ```
     ifdef MIDASSYS
     CXXFLAGS += -DHAVE_MIDAS -I$(MIDASSYS)/include -I$(MIDASSYS)/../../online/midasControl 
     endif
     ```

Although, I now realize that this is essentially using the "local" version of `midasControl`
instead of that which comes with the MIDAS package itself.  I guess I don't know why this
directory was packaged with the MidasDTC directory since the code seems out of date.  Indeed on
`cedar.berkeley.edu` the `midasControl` directory packaged with the MIDAS code itself seems
up-to-date and would have removed the necessity for the second and third step above (assuming the
code is in `$(MIDASSYS)/../../online/midasControl`).  I did have a `midasControl/` directory
packaged with my MIDAS code in `MidasDAQ/libGUI/midasControl/` but that seemed to be
not-up-to-date in the sense that it didn't have the `odbWriteUint32` function.

Anyway, it seems to compile now. 
